# Aula: Contagem de Objetos em Imagens com OpenCV
üîç Contagem de Objetos com Vis√£o Computacional Avan√ßadaüìã Sobre o ProjetoEste projeto implementa um sistema avan√ßado de contagem de objetos em imagens utilizando t√©cnicas de Vis√£o Computacional e Processamento Digital de Imagens com a biblioteca OpenCV em Python. O objetivo principal √© identificar e contar corretamente objetos em diversas condi√ß√µes, mesmo quando possuem diferentes cores, texturas ou est√£o pr√≥ximos.A partir de um c√≥digo base, esta implementa√ß√£o foi aprimorada para:Identificar objetos de forma mais precisa.Reduzir a ocorr√™ncia de falsos positivos (contagens erradas de n√£o-objetos).Apresentar visualmente os resultados de forma clara.Salvar todas as imagens processadas para an√°lise.‚ú® Melhorias ImplementadasAs principais melhorias focaram na robustez do algoritmo para lidar com diferentes cen√°rios:Detec√ß√£o Otimizada por Tipo de Objeto: Os par√¢metros de processamento (como binariza√ß√£o adaptativa, filtros morfol√≥gicos e transformada de dist√¢ncia para Watershed) s√£o ajustados dinamicamente com base no tipo de imagem que est√° sendo processada (por exemplo, chocolates.jpg vs. seeds.png). Isso permite uma contagem precisa para objetos com caracter√≠sticas visuais muito distintas.Detec√ß√£o Dupla para Contraste: Implementa uma l√≥gica para identificar eficazmente tanto objetos escuros (em fundos claros) quanto objetos claros (em fundos claros), combinando as m√°scaras resultantes. Isso √© crucial para cen√°rios como sementes de girassol (claras e escuras) ou chocolates variados.Ajuste Fino da Segmenta√ß√£o: Os par√¢metros da Transformada de Dist√¢ncia e do algoritmo Watershed foram ajustados iterativamente para garantir que cada objeto seja contado como uma √∫nica entidade, evitando sobredetec√ß√£o (contar um objeto em peda√ßos) ou subdetec√ß√£o (perder objetos).Visualiza√ß√£o Aprimorada: Os contornos s√£o desenhados com cores variadas para facilitar a distin√ß√£o visual de cada objeto. Os n√∫meros da contagem s√£o posicionados para maior clareza.Resumo Detalhado da Execu√ß√£o: Ao final do processamento em lote, √© gerado um resumo completo no console (e opcionalmente em uma janela separada se summary_display.py for criado) com as contagens de objetos para a imagem final e para cada m√°scara intermedi√°ria (dark_mask, light_mask, combined_mask, etc.). Isso auxilia na depura√ß√£o e na compreens√£o do pipeline.üöÄ Tecnologias UtilizadasT√©cnicas de Processamento de ImagemSuaviza√ß√£o Gaussiana: Redu√ß√£o de ru√≠do na imagem.Binariza√ß√£o Adaptativa: Converte imagens para preto e branco com limiares que se ajustam localmente.Detec√ß√£o de Bordas Canny: Usada para identificar contornos em objetos, especialmente os de baixo contraste.Opera√ß√µes Morfol√≥gicas: Abertura (para remover ru√≠dos e separar objetos finos), Dilata√ß√£o (para expandir √°reas brancas) e Fechamento (para preencher pequenos buracos).Transformada de Dist√¢ncia: Cria "picos" nas √°reas centrais dos objetos, essenciais para o Watershed.Algoritmo Watershed: Segmenta a imagem, dividindo objetos aglomerados com base nas "sementes" criadas pela transformada de dist√¢ncia.BibliotecasOpenCV (cv2): Biblioteca principal para Vis√£o Computacional.NumPy: Para manipula√ß√£o eficiente de arrays num√©ricos (imagens).Argparse: Para gerenciar argumentos de linha de comando.OS: Para interagir com o sistema de arquivos (caminhos, diret√≥rios).üì¶ Instala√ß√£oPr√©-requisitosPython 3.7 ou superiorpip (gerenciador de pacotes Python)Instala√ß√£o das Depend√™nciasPara instalar as bibliotecas necess√°rias, execute no seu terminal:pip install -r requirements.txt
(O requirements.txt ser√° fornecido no reposit√≥rio.)üîß Como UsarEstrutura do ProjetoCertifique-se de que a estrutura do seu projeto est√° organizada da seguinte forma no seu computador:seu_projeto_contagem/
‚îú‚îÄ‚îÄ main.py                         # O script principal do projeto
‚îú‚îÄ‚îÄ requirements.txt                # Lista de bibliotecas necess√°rias
‚îú‚îÄ‚îÄ README.md                       # Este arquivo de descri√ß√£o
‚îú‚îÄ‚îÄ images/                         # Pasta para suas imagens de entrada
‚îÇ   ‚îú‚îÄ‚îÄ chocolates.jpg              # Exemplo de imagem de chocolate
‚îÇ   ‚îú‚îÄ‚îÄ seeds.png                   # Exemplo de imagem de sementes
‚îÇ   ‚îî‚îÄ‚îÄ (outras imagens como gems.jpg, moedas.jpg, etc.)
‚îî‚îÄ‚îÄ processed_output/               # Pasta onde os resultados processados ser√£o salvos (ser√° criada automaticamente)
Execu√ß√£o do C√≥digoNavegue at√© a pasta do projeto: Abra seu terminal (ou Prompt de Comando no Windows) e use o comando cd para ir at√© a pasta seu_projeto_contagem/.cd caminho/para/seu_projeto_contagem
Execute o script:Para processar as imagens padr√£o (chocolates.jpg e seeds.png, e outras da lista interna):python main.py
O script abrir√° uma s√©rie de janelas exibindo as etapas de processamento e o resultado final para cada imagem. Pressione qualquer tecla em cada janela para fech√°-la e passar para a pr√≥xima. Ao final, um resumo de todas as contagens ser√° exibido no console (ou em uma janela separada se o arquivo summary_display.py for criado).Para processar uma imagem espec√≠fica:python main.py images/nome_da_sua_foto.jpg
Substitua images/nome_da_sua_foto.jpg pelo caminho da imagem que voc√™ deseja processar.ResultadosTodas as imagens processadas, incluindo os resultados finais com contornos e as m√°scaras intermedi√°rias para depura√ß√£o, ser√£o salvas na pasta processed_output/.üêõ Solu√ß√£o de ProblemasSe a contagem de objetos n√£o estiver correta ou se a segmenta√ß√£o visual n√£o estiver boa:Analise as M√°scaras de Depura√ß√£o: O programa salva v√°rias imagens intermedi√°rias (as m√°scaras preta e branca) na pasta processed_output/. Inspecion√°-las (Dark Objects Mask, Light Objects Mask, Combined Final Mask, Sure Foreground) √© crucial para entender em que etapa o algoritmo est√° falhando (se os objetos n√£o est√£o sendo binarizados corretamente, se est√£o com buracos, ou se as "sementes" para o Watershed n√£o est√£o adequadas).Ajuste os Par√¢metros no C√≥digo: O arquivo main.py cont√©m uma se√ß√£o --- Par√¢metros Condicionais Baseados no Tipo de Imagem ---. Estes par√¢metros foram ajustados para chocolates.jpg e seeds.png. Se voc√™ estiver usando outras imagens ou se precisar de mais refinamento, voc√™ pode ajustar os valores de vari√°veis como thresh_block_size_dark, thresh_c_dark, dist_transform_factor, area_thresh, canny_low, canny_high, etc. Experimente alterar um par√¢metro por vez e observe o efeito nas m√°scaras de depura√ß√£o.üìù Licen√ßaEste projeto est√° sob a licen√ßa MIT. Para mais detalhes, consulte o arquivo LICENSE no reposit√≥rio.ü§ù Contribui√ß√µesContribui√ß√µes s√£o bem-vindas! Se voc√™ tiver sugest√µes de melhorias ou quiser reportar um problema, sinta-se √† vontade para:Fazer um "fork" do reposit√≥rio.Criar uma nova "branch" para suas altera√ß√µes.Implementar suas mudan√ßas.Abrir um "Pull Request" detalhando suas modifica√ß√µes.Desenvolvido com ‚ù§Ô∏è usando OpenCV e Python